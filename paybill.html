<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Pay Online</title>

	<!-- core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <link href="css/animate.min.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">
    <link href="css/responsive.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]-->
    <link rel="shortcut icon" href="images/logo2.png">

    <!-- For Sandbox/Testing, use: -->
    <!-- <script type="text/javascript" src="https://jstest.authorize.net/v1/Accept.js" charset="utf-8"></script> -->
<!-- For Production, use: -->
    <script type="text/javascript" src="https://js.authorize.net/v1/Accept.js" charset="utf-8"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-103564924-1', 'auto');
      ga('send', 'pageview');

    </script>

</head><!--/head-->

<body class="homepage">

    <header>
        <nav class="navbar fixed-top navbar-toggleable-md navbar-light" style="background-color: white;border-bottom: 1px solid #222; padding: 0;">
          <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <a class="navbar-brand" href="#">
            <img src="images/energy-logo.png" class="wow main-logo lightSpeedIn" data-wow-duration="1300ms">
          </a>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link text-center" href="index.html">Home <span class="sr-only">(current)</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-center" href="ourbusiness.html">Our Businesses</a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle text-center" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  About Us
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                  <a class="dropdown-item" href="about-us.html"><i class="fa fa-history"> History and Timeline</i></a>
                  <a class="dropdown-item" href="community.html"><i class="fa fa-users"> Community Involvement</i></a>
                </div>
              </li>
              <li class="nav-item">
                <a class="nav-link text-center" href="careers.html">Careers</a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-center" href="contact-us.html">Contact</a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle text-center" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Applications
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                  <a class="dropdown-item" href="signup.html"><i class="fa fa-check-square-o"> Sign up for Electronic Statement</i></a>
                  <a class="dropdown-item" href="downloads.html"><i class="fa fa-cloud-download"> Form downloads</i></a>
                </div>
              </li>
              <li class="nav-item hidden-lg-up">
                <a class="nav-link text-center" href="https://wineenergy.fuelall.com/login.asp"> Fleet Fuel Portal</a>
              </li>
              <!-- <li class="nav-item hidden-lg-up">
                <a class="nav-link text-center" href="https://accounts.wineenergyva.com/OCI/login.aspx"> Online Account Access</a>
              </li> -->
              <li class="nav-item hidden-lg-up">
                <a class="nav-link text-center" href="paybill.html"> Pay Your Bill Online</a>
              </li>
            </ul>
          </div>
          <a class="btn hidden-md-down" href="https://wineenergy.fuelall.com/login.asp"><span><i class="fa fa-truck fa-3x"></i></span> <br><p style="font-size:10px"> Fleet Fuel Portal</p></a>
          <!-- <a class="btn hidden-md-down" href="https://accounts.wineenergyva.com/OCI/login.aspx"><span><i class="fa fa-globe fa-3x"></i></span> <br><p style="font-size:10px"> Online Account Access</p></a> -->
          <a class="btn hidden-md-down" href="#"><span><i class="fa fa-gear fa-3x"></i></span> <br><p style="font-size:10px"> Pay your bill online</p></a>
          <a class="navbar-brand hidden-md-down wow bounceIn" href="#">
            <img src="images/logo2.png" width="60px">
          </a>
        </nav>

    </header><!--/header-->

    <section class="bg-success top-section">
      <div class="container business-header">
        <img src="images/truck70.jpg" style="width:100%"></img>
      </div>
      <!-- <img src="images/truck23.jpg"></img> -->
    </section>

    <section>
      <div class="container">
      <div class="wow bounceIn" style="text-align:center;">
          <br>
            <h2 class="text-primary"><i class="fa fa-envelope"></i> Pay Your Bill Online</h2>
            <!-- <p class="lead text-primary">Provide your name, email and any questions you have for us!</p> -->
        </div>

            <div id="transaction"></div>
            <form class="form-control">
              <div class="row">
                <div class="col-sm-12">
                  <h2 class="text-center">Invoice</h2>
                </div>
                <div class="form-group col-sm-6">
                  <label>Invoice Number</label>
                  <input type="tel" id="invoiceNumber" class="form-control" placeholder="optional" autocomplete="off" /><br><br>
                </div>
                <div class="form-group col-sm-6">
                  <label>Amount to be Paid *</label>
                  <input type="text" id="amount" class="form-control" placeholder="required" /><br><br>
                </div>
              </div>

              <div class="row">
                <div class="col-sm-12">
                  <h3 class="text-center">Customer Information</h3>
                </div>
              </div>
              <div class="row">
                <div class="form-group col-sm-6">
                  <label>Company</label>
                  <input type="tel" id="company" class="form-control" placeholder="optional" autocomplete="off" /><br><br>
                </div>
              </div>
              <div class="row">
                <div class="form-group col-sm-6">
                  <label>First Name*</label>
                  <input type="text" id="firstName" class="form-control" placeholder="required" /><br><br>
                </div>
                <div class="form-group col-sm-6">
                  <label>Last Name*</label>
                  <input type="text" id="lastName" class="form-control" placeholder="required" /><br><br>
                </div>
                <div class="form-group col-sm-6">
                  <label>Address*</label>
                  <input type="text" id="address" class="form-control" placeholder="required" /><br><br>
                </div>
                <div class="form-group col-sm-6">
                  <label>City*</label>
                  <input type="text" id="city" class="form-control" placeholder="required" /><br><br>
                </div>
                <div class="form-group col-sm-6">
                  <label>State*</label>
                  <select name="state" id="state" class="form-control">
            					<option value="AK">AK</option>
            					<option value="AL">AL</option>
            					<option value="AR">AR</option>
            					<option value="AZ">AZ</option>
            					<option value="CA">CA</option>
            					<option value="CO">CO</option>
            					<option value="CT">CT</option>
            					<option value="DC">DC</option>
            					<option value="DE">DE</option>
            					<option value="FL">FL</option>
            					<option value="GA">GA</option>
            					<option value="HI">HI</option>
            					<option value="IA">IA</option>
            					<option value="ID">ID</option>
            					<option value="IL">IL</option>
            					<option value="IN">IN</option>
            					<option value="KS">KS</option>
            					<option value="KY">KY</option>
            					<option value="LA">LA</option>
            					<option value="MA">MA</option>
            					<option value="MD">MD</option>
            					<option value="ME">ME</option>
            					<option value="MI">MI</option>
            					<option value="MN">MN</option>
            					<option value="MO">MO</option>
            					<option value="MS">MS</option>
            					<option value="MT">MT</option>
            					<option value="NC">NC</option>
            					<option value="ND">ND</option>
            					<option value="NE">NE</option>
            					<option value="NH">NH</option>
            					<option value="NJ">NJ</option>
            					<option value="NM">NM</option>
            					<option value="NV">NV</option>
            					<option value="NY">NY</option>
            					<option value="OH">OH</option>
            					<option value="OK">OK</option>
            					<option value="OR">OR</option>
            					<option value="PA">PA</option>
            					<option value="RI">RI</option>
            					<option value="SC">SC</option>
            					<option value="SD">SD</option>
            					<option value="TN">TN</option>
            					<option value="TX">TX</option>
            					<option value="UT">UT</option>
            					<option value="VA" selected="">VA</option>
            					<option value="WY">WY</option>
                      <option value="VT">VT</option>
            					<option value="WA">WA</option>
            					<option value="WI">WI</option>
            					<option value="WV">WV</option>
            		  </select>
                </div>
                <div class="form-group col-sm-6">
                  <label>Zip Code*</label>
                  <input type="text" id="zipCode" class="form-control" placeholder="required" /><br><br>
                </div>
                <div class="form-group col-sm-6">
                  <label>Phone Number*</label>
                  <input type="text" id="phoneNumber" class="form-control" placeholder="required" /><br><br>
                </div>
                <div class="form-group col-sm-6">
                  <label>Email Address*</label>
                  <input type="text" id="email" class="form-control" placeholder="required" /><br><br>
                </div>
              </div>

              <div class="row">
                <div class="col-sm-12">
                  <h3 class="text-center">Credit Card Information</h3>
                </div>
                <div class="form-group col-sm-4">
                  <label>Card Type*</label>
                  <select type="select" id="cardType" class="form-control" placeholder="required" /><br><br>
                    <option value="VISA">VISA</option>
                    <option value="MasterCard">MasterCard</option>
                    <option value="American Express">American Express</option>
                  </select>
                </div>
                <div class="form-group col-sm-4">
                  <label>Card Number*</label>
                  <input type="tel" id="cardNumber" class="form-control" placeholder="required" autocomplete="off" /><br><br>
                </div>
                <div class="form-group col-sm-4">
                  <label>Card Security Code*</label>
                  <input type="text" id="cardCode" class="form-control" placeholder="required" /><br><br>
                </div>
                <div class="form-group col-sm-6">
                  <label>Expiration Date (Month MM)*</label>
                  <input type="text" id="monthId" class="form-control" placeholder="MM" /><br><br>
                </div>
                <div class="form-group col-sm-6">
                  <label>Expiration Date (Year YYYY)*</label>
                  <input type="text" id="yearId" class="form-control" placeholder="YYYY" /><br><br>
                </div>
              </div>
              <div id="form_status" class="status"></div>
              <!-- On submit, cause this data to be sent to the "sendPaymentDataToAnet()" function. -->
              <button type="button" class="btn btn-primary btn-lg" id="submitButton" onclick="sendPaymentDataToAnet()">Pay</button>
          </form>
        </div>
        <br>
    </section>

    <nav class="navbar navbar-inverse bottom navbar-toggleable-sm bg-inverse">
      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <!-- <a class="navbar-brand" href="#">
        <img src="images/logo.png" width="150px">
      </a> -->
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item active">
            <a class="nav-link" href="index.html">Home <span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="about-us.html">About Us</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="contact-us.html">contact</a>
          </li>
        </ul>
      </div>
      <a class="navbar-brand hidden-md-down" href="#">
        <img src="images/logo2.png" width="50px">
      </a>
    </nav>

    <script src="js/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.isotope.min.js"></script>
    <script src="js/main.js"></script>
    <script src="js/wow.min.js"></script>

    <script type="text/javascript">
      // $(document).ready(function() {
        function sendPaymentDataToAnet() {
            $("#submitButton").prop("disabled",true);
            var secureData = {}; authData = {}; cardData = {};

            // Extract the card number, expiration date, and card code.
            cardData.cardNumber = document.getElementById("cardNumber").value;
            cardData.month = document.getElementById("monthId").value;
            cardData.year = document.getElementById("yearId").value;
            cardData.cardCode = document.getElementById("cardCode").value;
            secureData.cardData = cardData;

            // The Authorize.Net Client Key is used in place of the traditional Transaction Key. The Transaction Key
            // is a shared secret and must never be exposed. The Client Key is a public key suitable for use where
            // someone outside the merchant might see it.
            authData.clientKey = "7GahxauGZhE98YQLrz9Jvj97cqtHxe8kNfW6Yy6sWEaNgL84NQkSDm26eDs5Nxhb";
            authData.apiLoginID = "7V2Wn8t8r";
            secureData.authData = authData;

            // Pass the card number and expiration date to Accept.js for submission to Authorize.Net.
            Accept.dispatchData(secureData, responseHandler);

            // Process the response from Authorize.Net to retrieve the two elements of the payment nonce.
            // If the data looks correct, record the OpaqueData to the console and call the transaction processing function.
            function responseHandler(response) {
                if (response.messages.resultCode === "Error") {
                    for (var i = 0; i < response.messages.message.length; i++) {
                        console.log(response.messages.message[i].code + ": " + response.messages.message[i].text);
                    }
                    // processTransaction(response.opaqueData);
                    $("#submitButton").prop("disabled",false);
                    alert("acceptJS library error! " + response.messages.message[0].text)
                } else {
                    console.log(response.opaqueData.dataDescriptor);
                    console.log(response.opaqueData.dataValue);
                    processTransaction(response.opaqueData);
                }
            }
        }

        function processTransaction(responseData) {
          //create the form and attach to the document
          var transactionForm = document.createElement("form");

          //submit the new form
          var form_status = $('<div class="form_status"></div>');
          var data = {
                        invoiceNumber: $('#invoiceNumber').val(),
                        amount: $('#amount').val(),
                        //Customer
                        company: $('#company').val(),
                        firstName: $('#firstName').val(),
                        lastName: $('#lastName').val(),
                        address: $('#address').val(),
                        city: $('#city').val(),
                        state: $('#state').val(),
                        zipCode: $('#zipCode').val(),
                        phoneNumber: $('#phoneNumber').val(),
                        email: $('#email').val(),
                        datadesc: responseData.dataDescriptor,
                        dataValue: responseData.dataValue
                        // datadesc: "",
                        // dataValue: ""
                      }
          $.ajax({
            type: 'POST',
            url: 'https://ibkxdho8ce.execute-api.us-east-1.amazonaws.com/prod/pay-online',
            dataType: 'json',
            contentType: 'application/json',
            data: JSON.stringify(data),

            beforeSend: function(){
              $("#form_status").html('<p><i class="fa fa-spinner fa-spin" style="color:green;"></i> Email is sending...</p>').fadeIn();
          },
          success: function (data) {
            $("#submitButton").prop("disabled",false);
            if (data.resultCode.name == "OK") {
              $("#form_status").html('<p class="text-success"> success</p>').delay(3000).fadeOut();
              window.location.replace("paysuccess.html");
            } else {
              console.log(data.message)
              $("#form_status").html('<p class="text-danger"> transaction failed</p>').delay(3000).fadeOut();
              alert("transaction failed: " + data.message[0].text)
            }
          },
          error: function (data) {
            console.log(data.responseJSON.message)
            $("#form_status").html('<p class="text-danger"> transaction failed</p>').delay(3000).fadeOut();
            $("#submitButton").prop("disabled",false);
            alert("transaction failed: " + data.responseJSON.message)
          }
          });
        }
      // });
    </script>

</body>
</html>
